name: if-and-output

on: push

jobs:
  create-output:
    runs-on: ubuntu-latest
    outputs:
      result: ${{ steps.make-result.outputs.value}}

    steps:
      - name: make result
        id: make-result
        run: |
          echo "value=ok" >> $GITHUB_OUTPUT

      - name: check output
        run: echo "결과 :${{ steps.make-result.outputs.value }}"
  
  on-success:
    needs: [create-output]
    runs-on: ubuntu-latest
    if: ${{ success() }}
    steps: 
      - run: echo "성공 시 실행됩니다. result=${{needs.create-output.outputs.result}}"